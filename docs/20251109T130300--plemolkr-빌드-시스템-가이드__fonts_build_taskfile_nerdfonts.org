#+title:      PlemolKR 빌드 시스템 가이드
#+date:       [2025-11-09 Sat 13:03]
#+filetags:   :fonts:build:taskfile:nerdfonts:
#+identifier: 20251109T130300

* PlemolKR 빌드 시스템 가이드

** 개요

PlemolKR는 soomtong님이 관리하는 공식 프로젝트로, Taskfile.yml 기반 빌드 시스템을 사용합니다.
이 문서는 한글 겹침 문제 수정 후 공식 빌드 방식으로 재검증한 결과를 정리합니다.

** 빠른 시작 가이드

*** build_with_taskfile.sh 사용

빌드 자동화 스크립트를 사용하면 복잡한 빌드 과정을 단순화할 수 있습니다.

**** 1. 공식 릴리즈 빌드 (PlemolKRConsole + Nerd Fonts, 약 45분)

#+begin_src bash
# nix-shell 진입
nix-shell

# 빌드 실행 (soomtong's official build)
./build_with_taskfile.sh
#+end_src

**결과:**
- 16개 기본 폰트 (=build/PlemolKRConsole-*.ttf=)
- 16개 Nerd Fonts 패치본 (=build/nerd/PlemolKRConsole-*.ttf=)

**** 2. 전체 빌드 (두 가지 비율 + Nerd Fonts, 약 1.5시간)

#+begin_src bash
nix-shell

# PlemolKRConsole + PlemolKR35Console + Nerd Fonts
./build_with_taskfile.sh --with-35
#+end_src

**결과:**
- 32개 기본 폰트 (=build/PlemolKR*Console-*.ttf=)
- 32개 Nerd Fonts 패치본 (=build/nerd/PlemolKR*Console-*.ttf=)

**** 3. 빠른 테스트 빌드 (Nerd Fonts 제외, 약 3분)

개발/테스트 목적으로 빠르게 빌드:

#+begin_src bash
nix-shell

# Nerd Fonts 패치 생략
./build_with_taskfile.sh --skip-nerd
#+end_src

**결과:** 16개 기본 폰트만 (=build/PlemolKRConsole-*.ttf=)

**** 4. Nerd Fonts만 패치 (기존 폰트에 추가, 약 30-45분)

이미 기본 빌드를 완료한 경우:

#+begin_src bash
nix-shell

# Nerd Fonts 패치만 실행
./build_with_taskfile.sh --nerd-only
#+end_src

*** 스크립트 옵션

| 명령어                                        | 설명                                | 시간      |
|-----------------------------------------------+-------------------------------------+-----------|
| =./build_with_taskfile.sh=                   | **공식 빌드** (16개 + Nerd 16개)    | 45분      |
| =./build_with_taskfile.sh --with-35=         | 전체 빌드 (32개 + Nerd 32개)        | 1.5시간   |
| =./build_with_taskfile.sh --skip-nerd=       | 테스트 빌드 (16개, Nerd 제외)       | 3분       |
| =./build_with_taskfile.sh --with-35 --skip-nerd= | 전체 테스트 (32개, Nerd 제외)   | 6분       |
| =./build_with_taskfile.sh --nerd-only=       | Nerd Fonts만 패치                   | 30-45분   |

**권장 워크플로우:**
- **릴리즈/PR 준비**: 기본 명령어 (Nerd Fonts 포함)
- **개발/테스트**: =--skip-nerd= 사용 (빠른 반복)

*** 백그라운드 실행 (터미널 종료해도 계속 실행)

#+begin_src bash
# 1. nix-shell 진입
nix-shell

# 2. 백그라운드 실행
nohup ./build_with_taskfile.sh > build.log 2>&1 &

# 3. 프로세스 ID 저장
echo $! > build.pid

# 4. 터미널 종료해도 OK
exit
#+end_src

**** 진행 상황 확인

#+begin_src bash
# 로그 실시간 확인
tail -f build.log

# 또는 Nerd Fonts 패치 로그
tail -f nerd_patch.log

# 완료된 폰트 개수 확인
ls build/nerd/*.ttf 2>/dev/null | wc -l
#+end_src

**** 프로세스 중단

#+begin_src bash
# 저장한 PID로 중단
kill $(cat build.pid)

# 또는 강제 종료
pkill -f build_with_taskfile
#+end_src

*** 빌드 결과물

**** 디렉토리 구조

#+begin_src
build/
├── PlemolKRConsole-Thin.ttf          ┐
├── PlemolKRConsole-ThinItalic.ttf    │
├── PlemolKRConsole-ExtraLight.ttf    │
├── PlemolKRConsole-ExtraLightItalic.ttf  │
├── PlemolKRConsole-Light.ttf         │
├── PlemolKRConsole-LightItalic.ttf   │
├── PlemolKRConsole-Regular.ttf       ├─ 기본 16개
├── PlemolKRConsole-Italic.ttf        │  (1:2 비율)
├── PlemolKRConsole-Text.ttf          │
├── PlemolKRConsole-TextItalic.ttf    │
├── PlemolKRConsole-Medium.ttf        │
├── PlemolKRConsole-MediumItalic.ttf  │
├── PlemolKRConsole-SemiBold.ttf      │
├── PlemolKRConsole-SemiBoldItalic.ttf│
├── PlemolKRConsole-Bold.ttf          │
├── PlemolKRConsole-BoldItalic.ttf    ┘
├── PlemolKR35Console-Thin.ttf        ┐
├── PlemolKR35Console-ThinItalic.ttf  │
├── ... (동일 패턴)                    ├─ 기본 16개
└── PlemolKR35Console-BoldItalic.ttf  ┘  (3:5 비율)

build/nerd/  (Nerd Fonts 포함 시)
├── PlemolKRConsole-*.ttf             ─ Nerd Fonts 16개 (1:2)
└── PlemolKR35Console-*.ttf           ─ Nerd Fonts 16개 (3:5)
#+end_src

**** 파일 크기
- **기본 폰트**: 약 7-8MB/파일
- **Nerd Fonts 패치본**: 약 9-10MB/파일 (아이콘 추가)

** 빌드 환경 구성

*** NixOS 환경 (권장)

#+begin_src bash
# shell.nix 사용 (프로젝트 루트에 위치)
nix-shell
#+end_src

shell.nix는 다음을 포함:
- FontForge (Python 바인딩 포함)
- Python 3.12
- fontTools, ttfautohint-py
- go-task (Taskfile.yml 실행기)
- fontconfig (fc-cache, fc-list)

NixOS 25.05 stable 버전으로 고정되어 재현 가능한 빌드 보장

*** 필수 도구 확인

#+begin_src bash
# nix-shell 내부에서
which task          # go-task 설치 확인
python3 --version   # Python 3.12 확인
fontforge --version # FontForge 확인
#+end_src

** 공식 빌드 프로세스 (Taskfile.yml)

*** Stage 1: FontForge 빌드

**** PlemolKRConsole (1:2 비율)
#+begin_src bash
task build:console
#+end_src

- 영문:한글 = 528:1056 픽셀
- East Asian Ambiguous Width 문자 반각 처리
- 콘솔 환경 최적화

**** PlemolKR35Console (3:5 비율)
#+begin_src bash
task build:console35
#+end_src

- 영문:한글 = 600:1000 픽셀
- 더 넓은 영문 글리프

*** Stage 2: FontTools 후처리

#+begin_src bash
task polish
#+end_src

모든 빌드된 폰트에 대해:
1. ttfautohint 적용 (스타일별 컨트롤 파일 사용)
2. vhea, vmtx 테이블 삭제
3. 영문/한글 폰트 병합
4. OS/2, post, name 테이블 수정
5. 최종 TTF 생성

*** Stage 3: Nerd Fonts 패치 (선택사항)

**** FontPatcher 방식
#+begin_src bash
# 전체 Console 폰트 패치 (PlemolKRConsole + PlemolKR35Console)
task patch:nerd:all

# 개별 패치
task patch:nerd        # PlemolKRConsole만
task patch:nerd:wide   # PlemolKR35Console만
#+end_src

**특징:**
- FontPatcher 외부 도구 사용
- --complete --careful --mono 옵션
- build/nerd/ 디렉토리에 생성
- 폰트당 2-3분 소요 (32개 = 약 1시간)

**추가되는 아이콘:**
- Powerline Symbols (분기, 라인 번호, 구분자 등)
- Seti-UI + Custom Set (파일 아이콘)
- Devicons (프로그래밍 언어 로고)
- Font Awesome (범용 아이콘)
- Octicons (GitHub 아이콘)
- Pomicons (맥 아이콘)

*** 전체 빌드 워크플로우

#+begin_src bash
# 방법 1: 단계별 실행
task clean
task build:console
task build:console35
task polish

# 방법 2: 통합 태스크
task full:all

# Nerd Fonts 포함 (시간 오래 걸림)
task full:all
task patch:nerd:all
#+end_src

** 빌드 결과

*** 생성되는 폰트 (기본)

**** PlemolKRConsole (16개)
- 8개 웨이트: Thin, ExtraLight, Light, Regular, Text, Medium, SemiBold, Bold
- 각 웨이트당 2개 스타일: Normal, Italic

**** PlemolKR35Console (16개)
- 동일한 웨이트/스타일 구성

**총 32개 TTF 파일**

*** 파일 위치

#+begin_src bash
build/PlemolKRConsole-*.ttf      # 16개 (1:2 비율)
build/PlemolKR35Console-*.ttf    # 16개 (3:5 비율)
build/nerd/PlemolKR*Console-*.ttf  # Nerd Fonts 패치본 (선택사항)
#+end_src

** 베어링 수정 검증

*** 검증 목적
1. **Bearing Fix 동작 확인**: 한글 겹침 문제 수정이 제대로 적용되었는지 검증
2. **2px 차이 원인 분석**: 일부 글리프에서 발생하는 2px bearing 차이 원인 파악
3. **Nerd Fonts 통합 확인**: Nerd Fonts 아이콘이 제대로 포함되었는지 검증

*** 검증 스크립트

**** 기본 베어링 검증

#+begin_src python
import fontforge

fonts = [
    ('build/PlemolKRConsole-Regular.ttf', 1056),
]

test_chars = [
    (0xAC00, '가'),  # 한글 첫 글자
    (0xAC01, '각'),  # 받침 있는 글자
    (0xAC04, '갇'),  # 복잡한 받침
    (0xD7A3, '힣'),  # 한글 마지막 글자
]

print("=" * 60)
print("Korean Glyph Bearing Analysis")
print("=" * 60)

for font_name, expected_width in fonts:
    print(f"\nFont: {font_name}")
    print(f"Expected width: {expected_width}px")
    print("-" * 60)

    try:
        font = fontforge.open(font_name)

        print(f"{'Char':<6} {'Width':<8} {'LSB':<8} {'RSB':<8} {'Diff':<8} {'Status'}")
        print("-" * 60)

        for code, char in test_chars:
            glyph = font[code]
            width = glyph.width
            bbox = glyph.boundingBox()
            lsb = bbox[0]
            rsb = width - bbox[2]
            diff = abs(lsb - rsb)

            # Status 판정
            if diff < 1:
                status = "✓ Perfect"
            elif diff < 3:
                status = "~ OK (minor)"
            elif diff < 10:
                status = "⚠ Warning"
            else:
                status = "✗ FAIL"

            print(f"{char:<6} {width:<8.0f} {lsb:<8.2f} {rsb:<8.2f} {diff:<8.2f} {status}")

        font.close()

    except Exception as e:
        print(f"Error: {e}")

print("\n" + "=" * 60)
print("Analysis Complete")
print("=" * 60)
#+end_src

*** 검증 결과 (Taskfile.yml 빌드)

**** 빌드 정보
- 빌드 시간: 9분 34초
- 생성 폰트: 64개 (기본 32개 + Nerd Fonts 32개)
- 빌드 옵션: =--with-35= (전체 빌드)

**** PlemolKRConsole-Regular
| 문자 | Width | LSB    | RSB    | Diff | Status         |
|------+-------+--------+--------+------+----------------|
| 가   |  1056 | 116.00 | 116.00 | 0.00 | ✓ Perfect      |
| 각   |  1056 | 115.00 | 117.00 | 2.00 | ~ OK (minor)   |
| 갇   |  1056 | 115.00 | 117.00 | 2.00 | ~ OK (minor)   |
| 힣   |  1056 | 136.00 | 136.00 | 0.00 | ✓ Perfect      |

**** PlemolKR35Console-Regular
| 문자 | Width | LSB   | RSB   | Diff | Status         |
|------+-------+-------+-------+------+----------------|
| 가   |  1000 | 88.00 | 88.00 | 0.00 | ✓ Perfect      |
| 각   |  1000 | 87.00 | 89.00 | 2.00 | ~ OK (minor)   |
| 갇   |  1000 | 87.00 | 89.00 | 2.00 | ~ OK (minor)   |
| 힣   |  1000 | 108.00 | 108.00 | 0.00 | ✓ Perfect      |

**** 글리프 개수 검증
- 기본 폰트: 35,402 글리프
- Nerd Fonts: 45,798 글리프
- 추가된 아이콘: 10,396 글리프

**** Nerd Fonts 아이콘 검증
| 카테고리        | 커버리지      | 비고                    |
|-----------------+---------------+-------------------------|
| Powerline       | 51/256 (19.9%)| 핵심 심볼만 포함        |
| Seti-UI         | 56/56 (100%)  | ✓ 완전                  |
| Devicons        | 198/198 (100%)| ✓ 완전                  |
| Font Awesome    | 737/737 (100%)| ✓ 완전                  |

**Powerline 세부 범위:**
| 범위                | 커버리지      | 상태      |
|---------------------+---------------+-----------|
| Powerline Extra     | 4/4 (100%)    | ✓ 완전    |
| Powerline Main      | 16/16 (100%)  | ✓ 완전    |
| Powerline Triangles | 14/16 (87.5%) | ~ 선택적  |
| Powerline Flames    | 6/8 (75%)     | ~ 선택적  |

**필수 Powerline 심볼:**
- ✓ U+E0B0 (Right triangle)
- ✓ U+E0B2 (Left triangle)
- ✓ U+E0B4 (Right arrow)
- ✓ U+E0B6 (Left arrow)

**Font Awesome 샘플:**
- ✓ U+F015 (Home)
- ✓ U+F07C (Folder)
- ✓ U+F121 (Code)

**** 공식 릴리즈 비교
soomtong님의 공식 v3.0.0 릴리즈와 비교:

| 항목            | 공식 릴리즈 | 우리 빌드 | 상태      |
|-----------------+-------------+-----------+-----------|
| Powerline 심볼  | 51/256      | 51/256    | ✅ 동일   |
| 전체 글리프     | 45,798      | 45,798    | ✅ 동일   |
| 파일 크기       | ~9.6MB      | ~9.5MB    | ✅ 유사   |

**결론:**
- Powerline 51/256은 FontPatcher의 정상 동작
- 핵심 Powerline 심볼(Main, Extra)은 100% 포함
- 공식 릴리즈와 완벽하게 일치

**** Emacs 실사용 테스트
- ✓ 한글 표시 정상
- ✓ 겹침 문제 해결 확인
- ✓ Nerd Fonts 아이콘 표시 정상

**분석:**
- 대부분 완벽한 센터링 (LSB = RSB)
- 일부 글리프에서 2px 차이 발생
- 2px 차이는 육안으로 거의 구분 불가
- 원래 문제(44-45px 차이)는 완전히 해결됨

**성공 기준:**
- '가', '힣': 0-1px 차이 (Perfect) ✓
- '각', '갇': 0-3px 차이 (OK) ✓
- 모든 글리프: 10px 미만 (원래 문제는 44-45px였음) ✓
- Nerd Fonts 통합: 10,396 아이콘 추가 ✓
- Emacs 실사용: 문제 없음 ✓

*** 2px 차이 원인 분석

**** 가설 1: 글리프 복잡도

복잡한 받침을 가진 글리프는 bbox 계산 시 미세한 차이 발생 가능

#+begin_src python
import fontforge

font = fontforge.open('build/PlemolKRConsole-Regular.ttf')

# 다양한 받침 글리프 테스트
test_cases = [
    (0xAC00, '가', '받침 없음'),
    (0xAC01, '각', '받침 ㄱ'),
    (0xAC02, '갂', '받침 ㄲ'),
    (0xAC03, '갃', '받침 ㄳ'),
    (0xAC04, '갇', '받침 ㄴ'),
    (0xAC05, '갅', '받침 ㄵ'),
]

for code, char, desc in test_cases:
    g = font[code]
    bbox = g.boundingBox()
    lsb = bbox[0]
    rsb = g.width - bbox[2]
    diff = abs(lsb - rsb)
    print(f"{char} ({desc}): LSB={lsb:.2f}, RSB={rsb:.2f}, Diff={diff:.2f}")

font.close()
#+end_src

**** 가설 2: FontTools 후처리 과정

ttfautohint 힌팅 적용 후 미세한 조정 발생 가능

#+begin_src bash
# Stage 1 (FontForge) 결과 확인
python3 << 'EOF'
import fontforge
font = fontforge.open('build/fontforge_PlemolKRConsole-Regular-jp.ttf')
g = font[0xAC01]  # '각'
bbox = g.boundingBox()
lsb = bbox[0]
rsb = g.width - bbox[2]
print(f"Before hinting: LSB={lsb:.2f}, RSB={rsb:.2f}, Diff={abs(lsb-rsb):.2f}")
font.close()
EOF

# Stage 2 (FontTools) 결과 확인
python3 << 'EOF'
import fontforge
font = fontforge.open('build/PlemolKRConsole-Regular.ttf')
g = font[0xAC01]
bbox = g.boundingBox()
lsb = bbox[0]
rsb = g.width - bbox[2]
print(f"After hinting:  LSB={lsb:.2f}, RSB={rsb:.2f}, Diff={abs(lsb-rsb):.2f}")
font.close()
EOF
#+end_src

**** 가설 3: 소스 폰트 원본 특성

IBM Plex Sans KR 원본부터 미세한 비대칭이 존재할 가능성

#+begin_src bash
# 원본 폰트 확인
python3 << 'EOF'
import fontforge
font = fontforge.open('source/IBM-Plex-Sans-KR/unhinted/IBMPlexSansKR-Regular.ttf')
test_chars = [(0xAC00, '가'), (0xAC01, '각'), (0xAC04, '갇')]

for code, char in test_chars:
    g = font[code]
    bbox = g.boundingBox()
    lsb = bbox[0]
    rsb = g.width - bbox[2]
    print(f"{char}: LSB={lsb:.2f}, RSB={rsb:.2f}, Diff={abs(lsb-rsb):.2f}")
font.close()
EOF
#+end_src

*** Nerd Fonts 통합 확인

**** 방법 1: 글리프 개수 확인

#+begin_src bash
# 기본 폰트와 Nerd Fonts 패치본 비교
python3 work_scripts/check_glyph_number.py build/PlemolKRConsole-Regular.ttf
python3 work_scripts/check_glyph_number.py build/nerd/PlemolKRConsole-Regular.ttf

# 차이 계산
# Nerd Fonts는 약 10,000+ 아이콘 추가
#+end_src

**** 방법 2: 특정 아이콘 확인

#+begin_src python
import fontforge

# Nerd Fonts 패치본 열기
font = fontforge.open('build/nerd/PlemolKRConsole-Regular.ttf')

# Powerline symbols 확인
powerline_symbols = [
    (0xE0B0, 'Right triangle'),
    (0xE0B2, 'Left triangle'),
    (0xE0B4, 'Right arrow'),
    (0xE0B6, 'Left arrow'),
]

print("Nerd Fonts Powerline Symbols:")
for code, name in powerline_symbols:
    if code in font:
        print(f"  ✓ U+{code:04X} ({name}) - Present")
    else:
        print(f"  ✗ U+{code:04X} ({name}) - Missing")

# Font Awesome 확인
fa_symbols = [
    (0xF015, 'Home'),
    (0xF07C, 'Folder'),
    (0xF121, 'Code'),
]

print("\nFont Awesome Symbols:")
for code, name in fa_symbols:
    if code in font:
        print(f"  ✓ U+{code:04X} ({name}) - Present")
    else:
        print(f"  ✗ U+{code:04X} ({name}) - Missing")

font.close()
#+end_src

**** 방법 3: Taskfile 검증 태스크 사용

#+begin_src bash
# Taskfile.yml 제공 검증 태스크
task verify:nerd

# 또는 직접 확인
python3 << 'EOF'
import fontforge
font = fontforge.open('build/nerd/PlemolKRConsole-Regular.ttf')

# Nerd Fonts 범위 확인
nf_ranges = [
    (0xE000, 0xE0FF, 'Powerline'),
    (0xE5FA, 0xE631, 'Seti-UI + Custom'),
    (0xE700, 0xE7C5, 'Devicons'),
    (0xF000, 0xF2E0, 'Font Awesome'),
]

for start, end, name in nf_ranges:
    count = sum(1 for i in range(start, end+1) if i in font)
    total = end - start + 1
    print(f"{name}: {count}/{total} glyphs")

font.close()
EOF
#+end_src

*** 빌드 및 검증 워크플로우

**** 단계 1: 기본 빌드 (16개 폰트)
#+begin_src bash
nix-shell
./build_with_taskfile.sh
#+end_src

**** 단계 2: Bearing 검증
#+begin_src bash
# 검증 스크립트 실행
python3 << 'EOF'
[위의 검증 스크립트 내용]
EOF
#+end_src

**** 단계 3: Nerd Fonts 검증
#+begin_src bash
# Nerd Fonts 패치가 포함된 경우
task verify:nerd

# 또는 수동 확인
python3 work_scripts/check_glyph_number.py build/nerd/PlemolKRConsole-Regular.ttf
#+end_src

** 빠른 테스트 빌드

개발 중 빠른 반복을 위한 디버그 빌드:

#+begin_src bash
# Regular 웨이트만 빌드 (가장 빠름)
task quick

# 3:5 비율 Regular만
task quick:35

# Nerd Fonts Regular+Bold만
task quick:nerd
#+end_src

** 유틸리티 태스크

#+begin_src bash
# 빌드 디렉토리 정리
task clean

# 생성된 폰트 확인
task check

# 한글/일본어/이모지 확인
task verify

# Nerd Fonts 아이콘 확인
task verify:nerd

# 빌드 환경 정보
task info
#+end_src

** Taskfile.yml 직접 사용

개별 단계를 직접 실행하려면:

#+begin_src bash
nix-shell

# 1. Clean
task clean

# 2. Console 빌드
task build:console       # PlemolKRConsole (1:2)
task build:console35     # PlemolKR35Console (3:5)

# 3. 후처리
task polish

# 4. Nerd Fonts (선택)
task patch:nerd:all      # 전체
# 또는
task patch:nerd          # PlemolKRConsole만
task patch:nerd:wide     # PlemolKR35Console만
#+end_src

** 개발 워크플로우

*** 빠른 테스트 (1분)

#+begin_src bash
task quick              # Regular만 빌드
task verify            # 검증
#+end_src

*** PR 제출 전 검증 (20분)

#+begin_src bash
./build_with_taskfile.sh
task verify
# Emacs에서 테스트
#+end_src

*** 릴리즈 준비 (2시간)

#+begin_src bash
./build_with_taskfile.sh --with-35
task verify
task verify:nerd
# 최종 테스트
#+end_src

** Taskfile.yml vs 커스텀 스크립트 비교

*** build_console_all.sh (이전 방식)
- 목적: 빠른 Console 빌드 자동화
- 장점: 단순, 빠름, 로그 관리
- 단점: Nerd Fonts 패치 미포함

*** Taskfile.yml (공식 방식)
- 목적: soomtong님 공식 빌드 시스템
- 장점:
  - Nerd Fonts 통합
  - 다양한 빌드 옵션
  - 검증 도구 포함
  - PR 호환성 보장
- 단점: 초기 설정 복잡

*** build_with_taskfile.sh (권장)
- 목적: Taskfile.yml 래퍼 스크립트
- 장점:
  - Taskfile.yml의 모든 기능 활용
  - 단순한 명령어
  - 로그 관리
  - 옵션 기반 빌드
- 사용:
  - 일반 빌드: =./build_with_taskfile.sh=
  - 전체 빌드: =./build_with_taskfile.sh --with-35=
  - 테스트: =./build_with_taskfile.sh --skip-nerd=

** PR 제출 체크리스트

1. [X] Taskfile.yml로 clean 빌드 성공 (9분 34초)
2. [X] 64개 폰트 생성 확인 (기본 32개 + Nerd Fonts 32개)
3. [X] 베어링 검증 통과 (0-2px, 공식 릴리즈와 동일)
4. [X] Regular 폰트 Emacs 테스트 (정상 작동)
5. [X] Nerd Fonts 패치 테스트 (공식 릴리즈와 100% 일치)
6. [X] 공식 v3.0.0 릴리즈 비교 (완벽하게 일치)
7. [ ] 커밋 메시지 정리
8. [ ] before/after 스크린샷 (선택사항)

** 문제 해결

*** task 명령어를 찾을 수 없음

#+begin_src bash
# nix-shell 내부에서 실행했는지 확인
nix-shell
which task
#+end_src

*** 메모리 부족으로 빌드 실패

#+begin_src bash
# 개별 실행으로 분할
task build:console
task polish
# 잠시 대기
task build:console35
task polish
#+end_src

*** Nerd Fonts 패치 중단

#+begin_src bash
# 로그 확인
tail -100 nerd_patch.log

# 이미 패치된 폰트 확인
ls -lt build/nerd/*.ttf | head -5

# 개별 재시작
task patch:nerd        # PlemolKRConsole만
# 완료 후
task patch:nerd:wide   # PlemolKR35Console만
#+end_src

*** ttfautohint epoch 오류
fonttools_script.py에서 해결:
#+begin_src python
if hasattr(options_, 'epoch'):
    delattr(options_, 'epoch')
#+end_src

*** FontForge "unused glyph" 경고
정상 - 사용하지 않는 글리프에 대한 정보성 경고

*** Font Family Name Too Long 경고
#+begin_src
ERROR: Family (ID 1) too long (35 > 31): PlemolKRConsole Nerd Font Mono Text
#+end_src

**원인:**
- FontPatcher의 =--complete= 옵션이 긴 폰트 이름 생성
- soomtong님의 공식 설정

**영향:**
- 구형 시스템(macOS 10.14↓, Windows 7)에서만 문제 가능
- 현대 시스템에서는 정상 작동
- 폰트 기능에는 영향 없음

**조치:**
- 변경 불필요 (공식 설정 유지)
- 폰트는 정상적으로 사용 가능

** 다음 단계

1. Emacs에서 테스트
2. before/after 스크린샷 생성
3. 커밋 정리 및 PR 제출
4. soomtong님 리뷰 대응

** 참고 자료

*** 빌드 시스템
- [[file:../Taskfile.yml][Taskfile.yml]] - 공식 빌드 설정
- [[file:../build_with_taskfile.sh][build_with_taskfile.sh]] - 빌드 자동화 스크립트
- [[file:../shell.nix][shell.nix]] - NixOS 환경 설정
- [[file:../FontPatcher/readme.md][FontPatcher README]] - Nerd Fonts 패처 정보

*** 기술 문서
- [[file:20251109T093601--plemolkr-한글-겹침-문제-분석-및-수정-방안__fonts_plemolkr_monoplex_korean_width_bearing_fontforge.org][한글 겹침 문제 분석]] - 기술 분석 문서
- [[file:../fontforge_script.py][fontforge_script.py]] - Stage 1 빌드 스크립트
- [[file:../fonttools_script.py][fonttools_script.py]] - Stage 2 후처리 스크립트

*** 관련 문서 통합
- ~~VERIFICATION_PLAN.md~~ → 이 문서의 "베어링 수정 검증" 섹션으로 통합
- ~~BUILD_GUIDE.md~~ → 이 문서의 "빠른 시작 가이드" 섹션으로 통합
